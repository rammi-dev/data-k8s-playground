# Milvus Playground Values
# Cluster mode with embedded Woodpecker WAL, Ceph S3 storage
#
# Chart v5.0.11 defaults: mixCoordinator, woodpecker, no Pulsar/Kafka
#
# Deploy with:
#   helm dependency update
#   helm upgrade --install milvus . -n milvus -f values.yaml

milvus:
  # Cluster mode (chart default)
  cluster:
    enabled: true

  # Milvus image
  image:
    all:
      repository: milvusdb/milvus
      tag: v2.6.8
      pullPolicy: IfNotPresent

  # mixCoordinator (chart default: enabled)
  mixCoordinator:
    replicas: 1
    resources:
      requests:
        cpu: 250m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 1Gi

  # Worker nodes
  proxy:
    replicas: 1
    resources:
      requests:
        cpu: 250m
        memory: 256Mi
      limits:
        cpu: 1000m
        memory: 1Gi

  queryNode:
    replicas: 1
    resources:
      requests:
        cpu: 250m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 2Gi

  dataNode:
    replicas: 1
    resources:
      requests:
        cpu: 250m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 2Gi

  indexNode:
    replicas: 1
    resources:
      requests:
        cpu: 250m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 2Gi

  # Woodpecker WAL — embedded, uses S3 for storage (chart default)
  standalone:
    messageQueue: woodpecker

  # etcd — metadata store (required)
  etcd:
    replicaCount: 1
    persistence:
      enabled: true
      size: 5Gi
      storageClass: ceph-block
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi

  # MinIO — disabled, using Ceph RGW S3 instead
  minio:
    enabled: false

  # Ceph RGW as S3 backend
  # accessKey/secretKey injected by build.sh via --set
  externalS3:
    enabled: true
    host: rook-ceph-rgw-s3-store.rook-ceph.svc
    port: "80"
    useSSL: false
    bucketName: milvus
    rootPath: file
    useIAM: false
    cloudProvider: "aws"

  # Attu — web management console
  attu:
    enabled: true
    service:
      type: ClusterIP
      port: 3000

  # Service
  service:
    type: ClusterIP
    port: 19530
